<!DOCTYPE html>
<html>
    <body>
    
        <p id="result">Usage: !card || !wins &lt;num&gt; || !mercy || !nomercy</p>

        <script src="/jquery-3.2.1.min.js"></script>

        <script>
        
            var myObj, myJSON, text, obj, param;

            var sParam = 'type';
            var sPageURL = window.location.search.substring(1);
            var sURLVariables = sPageURL.split('&');
            for (var i = 0; i < sURLVariables.length; i++) {
                var sParameterName = sURLVariables[i].split('=');
                if (sParameterName[0] == sParam) {
                    //return sParameterName[1];
                    param = sParameterName[1];
                }
            }
            
            /*myObj = { "wins":2 };
            myJSON = JSON.stringify(myObj);
            localStorage.setItem("cardData", myJSON);*/
            
            switch(param) {
                case 'wins':
                    var num;
                    sParam = 'num';
                    var sPageURL = window.location.search.substring(1);
                    var sURLVariables = sPageURL.split('&');
                    for (var i = 0; i < sURLVariables.length; i++) {
                        var sParameterName = sURLVariables[i].split('=');
                        if (sParameterName[0] == sParam) {
                            //return sParameterName[1];
                            num = sParameterName[1];
                        }
                    }
                    //Storing data:
                    myObj = { "wins":num };
                    myJSON = JSON.stringify(myObj);
                    localStorage.setItem("cardData", myJSON);
                    document.getElementById("result").innerHTML = "Card wins set to " + num;
                    break;
                case 'card':
                    //Retrieving data:
                    text = localStorage.getItem("cardData");
                    obj = JSON.parse(text);
                    document.getElementById("result").innerHTML = "Wins: " + obj.wins + "; Mercy:" + obj.mercy;
                    break;
                case 'mercy':
                    myObj = { "mercy":true };
                    myJSON = JSON.stringify(myObj);
                    localStorage.setItem("cardData", myJSON);
                    document.getElementById("result").innerHTML = "Mercy reset";
                    break;
                case 'nomercy':
                    myObj = { "mercy":false };
                    myJSON = JSON.stringify(myObj);
                    localStorage.setItem("cardData", myJSON);
                    document.getElementById("result").innerHTML = "Mercy lost";
                    break;
                case 'resetcard':
                    myObj = { "wins":0, "mercy":true };
                    myJSON = JSON.stringify(myObj);
                    localStorage.setItem("cardData", myJSON);
                    document.getElementById("result").innerHTML = "Card reset";
                    break;
            }
            
        </script>

    </body>
</html>
